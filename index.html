<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Project Re:build</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.css">
        <link rel="stylesheet" type="text/css" href="./CSS/index.css">
    </head>
    <body>

        <header>
            <h1><a href="./index.html"><img src="./images/logo.PNG" height="20%" width="20%"></a></h1>
        </header>

        <nav>
            <a href="./index.html">ホーム</a>
            <a href="./project.html">Projects</a>
            <a href="./Experiment.html">Experimemts</a>
            <a href="https://www.kanagawa-u.ac.jp/cooperation/project/fablab/" target="_blank">Fablab みなとみらい（外部サイト）</a>
        </nav>

        

        <section>
            <article>
                <h2>Project Re:buildとは？</h2>
                <p>Project Re:buildとは本来捨てられるハズの端材などの廃棄物からまた新しくものを作るプロジェクトです。</p>
                <p>年間で木材だけでも約８００万トンを超える量が発生していますがその大部分が再利用されずに焼却・埋め立て処分されています。</p>
                <p>私はそれを使って新たな形をビルドできないか考え、その結果がこの"Project Re:BUILD"なのです。</p>
            </article>

            <article>
                <div class="ticker-wrap">
                    <div class="ticker-head">HEGHLIGHTS</div>
                    <div class="ticker">
                      <ul>
                        <li class='ticker-item'><a href="./projects/project1.html"><span class="ticker-date"></span><span class="ticker-title">Project1 3Dプリンターのフィラメントを利用したキーホルダー</span></a></li>
                        <li class='ticker-item'><a href="#"><span class="ticker-date"></span><span class="ticker-title">Project2 木粉から新しい素材を作る</span></a></li>
                        <li class='ticker-item'><a href="#"><span class="ticker-date"></span><span class="ticker-title">Experiment1 キャップを溶かす</span></a></li>
                        <li class='ticker-item'><a href="#"><span class="ticker-date"></span><span class="ticker-title">Project3 果物の皮から肥料を作る</span></a></li>
                        <li class='ticker-item'><a href="#"><span class="ticker-date"></span><span class="ticker-title">Experiment2 果物の皮の分解を促進するには？</span></a></li>
                      </ul>
                    </div>
                  </div>
            </article>
        </section>

        <footer>
            <p>&copy; 2023 Project Re:build</p>
        </footer>

        <script type="text/javascript">
            (function(window, document) {
              const animTime = 5000; // アニメーション時間(ms)
              const speed = 100; // テキストの移動速度(px)
              const limit = 0; // ブレークポイント(px)
              let animId;
              let isRunning = false;
            
              const ticker = document.querySelector('.ticker');
              loadTicker();
            
              function loadTicker() {
                tickerAnim();
                animId = setInterval(tickerAnim, animTime);
                isRunning = true;
              }
            
              // アニメーション処理
              function tickerAnim() {
                const items = ticker.querySelectorAll('.ticker-item');
                const running = ticker.querySelector('.run');
                let idx, link, first, next;
                if (!running) { // 実行中の要素がない場合（初回のみ）
                  first = items[0];
                  link = first.querySelector('a');
                  first.classList.add('fadeInDown', 'run');
                  first.style.zIndex = 1;
                  setTimeout(textMove, 1000, link); // 第3引数に引数linkを指定。こうしないと即実行されてしまうので注意。
                } else {
                  for (let i = 0; i < items.length; i++) {
                    if (items[i] == running) {
                      idx = i; // 実行中要素のインデックスを取得
                      break;
                    }
                  }
                  next = items[(idx + 1) % items.length];
                  running.classList.replace('fadeInDown', 'fadeOutDown');
                  setTimeout(() => {
                    running.classList.remove('fadeOutDown', 'run');
                    running.style.zIndex = 0;
                    link = running.querySelector('a');
                    link.style.transform = 'none';
                    next.classList.add('fadeInDown', 'run');
                    next.style.zIndex = 1;
                    link = next.querySelector('a');
                    setTimeout(textMove, 1000, link);
                  }, 300);
                }
              }
            
              // テキスト移動処理
              function textMove(elm) {
                const move = elm.parentNode.clientWidth - elm.clientWidth;
                if (move < 0) {
                  elm.style.transform = 'translateX(' + move + 'px)';
                  elm.style.transitionDuration = Math.abs(move) / speed + 's';
                }
              }
            
              // ウィンドウサイズ変更時
              window.addEventListener('resize', () => {
                const windowWidth = window.innerWidth;
                if (windowWidth <= limit) {
                  ticker.style.display = 'none';
                  clearInterval(animId);
                  isRunning = false;
                } else {
                  if (!isRunning) {
                    ticker.style.display = 'block';
                    animId = setInterval(tickerAnim, animTime);
                    isRunning = true;
                  }
                }
              });
            })(window, document);
            </script>
            

    </body>
</html>